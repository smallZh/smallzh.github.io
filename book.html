<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>epub online</title>
    <script src="_assets/js/books/jquery.min.js"></script>
    <script src="_assets/js/books/jszip.min.js"></script>
    <script src="_assets/js/books/Blob.min.js"></script>
    <script src="_assets/js/books/deflate.min.js"></script>
    <script src="_assets/js/books/inflate.min.js"></script>
    <script src="_assets/js/books/epub.js"></script>

    <link rel="stylesheet" href="_assets/css/bootstrap.min.css">

</head>
<style>
    * {
        margin: 0px;
        padding: 0px;
    }

    .botton_win {
        position: fixed;
        bottom: 0px;
        left: 40%;
    }

    .botton_win > button {
        width: auto;
        height: 25px;
        font-size: 18px;
    }
</style>

<body>
<div style="width: 100%;">
    <div id="read" style="width: 100%; height: auto;"></div>

    <div style="width: 250px;margin: auto;padding-bottom: 10px;">

        背景色: <input type="color" id="backcolor" value="#ffffff" onchange="backcolor()">
        字体颜色: <input type="color" id="textcolor" value="#000000" onchange="backcolor()">

    </div>

    <div style="width: 450px;margin: auto;padding-bottom: 50px;">
        <button class="btn btn-primary" id="prevPageBtn">上一页</button>
        <button class="btn btn-primary" id="nextPageBtn">下一页</button>

        <button class="btn btn-primary" id="reduce_font">字体缩小</button>
        <button class="btn btn-primary" id="big_font">字体加大</button>
    </div>
</div>


<script>

    function backcolor() {
        var theme = {
            name: "custom_theme",
            style: {
                body: {
                    color: $("#textcolor").val(),
                    background: $("#backcolor").val(),
                },
            },
        }

        themes.register(theme.name, theme.style);

        themes.select(theme.name);

    }

    var fontsize = 16;

    var bigFont = document.getElementById("big_font")
    bigFont.addEventListener("click", function () {
        fontsize = fontsize + 1
        themes.fontSize(fontsize + "px")
    });
    var reduceFont = document.getElementById("reduce_font")
    reduceFont.addEventListener("click", function () {
        fontsize = fontsize - 1
        themes.fontSize(fontsize + "px")
    });


    var prevPageBtn = document.getElementById("prevPageBtn");
    var nextPageBtn = document.getElementById("nextPageBtn");

    prevPageBtn.addEventListener("click", function () {
        rendition.prev();
    });

    nextPageBtn.addEventListener("click", function () {
        rendition.next();

    });

    var book = ePub("_assets/resources/linux.epub");

    var rendition = book.renderTo("read", {
        // default double page
        // width: '100%',
        // height: '100%'
        //
        // manager: "continuous",
        // flow: "scrolled"
    });


    var themes = rendition.themes;

    rendition.display();

</script>
</body>
</html>


